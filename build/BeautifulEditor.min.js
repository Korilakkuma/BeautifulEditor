/**
 * BeautifulEditor.min.js
 * @fileoverview HTML5 WYSIWYG Editor Library
 *
 * Copyright (c) 2013 Tomohiro IKEDA (Korilakkuma)
 * Released under the MIT license
 */
!function(t){function n(t){if(this.iframe=null,this.contentWindow=null,this.contentDocument=null,!(t instanceof HTMLIFrameElement))throw new Error("The constructor requires the instance of HTMLIFrameElement.");this.iframe=t,this.contentWindow=t.contentWindow,this.contentDocument=t.contentDocument,this.contentDocument.body.contentEditable=!0,this.contentDocument.designMode="on",this.editMode=n.EDIT_MODES.HTML,this.range=null,this.histories=[],this.historyPointer=0,this.histories[this.historyPointer]=this.contentDocument.body.outerHTML,this.currentBackgroundColor="rgba(255, 255, 255, 1.0)"}n.EDIT_MODES={},n.EDIT_MODES.HTML="html",n.EDIT_MODES.TEXT="text",n.prototype.getWindow=function(){return this.contentWindow},n.prototype.getDocument=function(){return this.contentDocument},n.prototype.getSelection=function(){return this.contentWindow.getSelection()},n.prototype.getRange=function(t){var n=parseInt(t),e=this.contentWindow.getSelection();return n>=0&&n<e.rangeCount?e.getRangeAt(n):null},n.prototype.holdRange=function(t){var n=this.getRange(t);null!==n&&(this.range=n.cloneRange())},n.prototype.revertRange=function(){if(null!==this.range){var t=this.getSelection();t.removeAllRanges(),t.addRange(this.range)}},n.prototype.surround=function(t){var n=this.contentWindow.getSelection();if(n.rangeCount>0){var e=n.getRangeAt(0),o=document.createElement(t),i=e.extractContents();return o.appendChild(i),e.insertNode(o),o}return null},n.prototype.isSelected=function(){var t=this.getRange(0);return null===t?!1:!t.collapsed},n.prototype.moveCaret=function(t){this.contentDocument.execCommand("selectAll",!1,null);var n=this.getSelection(),e=this.getRange(0);null!==e&&(e.collapse(Boolean(t)),n.removeAllRanges(),n.addRange(e))},n.prototype.pushHistory=function(){this.histories[++this.historyPointer]=this.contentDocument.body.outerHTML,this.historyPointer<this.histories.length-1&&(this.histories=this.histories.slice(0,this.historyPointer+1))},n.prototype.undo=function(t,n,e){var o=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){o.historyPointer===o.histories.length-1&&(o.histories[o.historyPointer+1]=o.contentDocument.body.outerHTML),o.historyPointer>0?o.contentDocument.body.outerHTML=o.histories[--o.historyPointer]:"[object Function]"===Object.prototype.toString.call(e)&&e()},!1)},n.prototype.redo=function(t,n,e){var o=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){o.historyPointer<o.histories.length-2?o.contentDocument.body.outerHTML=o.histories[++o.historyPointer]:"[object Function]"===Object.prototype.toString.call(e)&&e()},!1)},n.prototype.backgroundColor=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.body.style.backgroundColor=this.value,e.currentBackgroundColor=this.value,e.pushHistory()},!1)},n.prototype.foreColor=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("foreColor",!1,this.value),e.pushHistory()},!1)},n.prototype.backColor=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("backColor",!1,this.value),e.pushHistory()},!1)},n.prototype.fontName=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("fontName",!1,this.value),e.pushHistory()},!1)},n.prototype.fontSize=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("fontSize",!1,this.value),e.pushHistory()},!1)},n.prototype.bold=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("bold",!1,null),e.pushHistory()},!1)},n.prototype.italic=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("italic",!1,null),e.pushHistory()},!1)},n.prototype.underline=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("underline",!1,null),e.pushHistory()},!1)},n.prototype.strikeThrough=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("strikeThrough",!1,null),e.pushHistory()},!1)},n.prototype.subscript=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("subscript",!1,null),e.pushHistory()},!1)},n.prototype.superscript=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("superscript",!1,null),e.pushHistory()},!1)},n.prototype.code=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){var n=e.getRange(0);if(null!==n){var o=e.surround("code"),i=document.createElement("pre");i.appendChild(o),n.insertNode(i),e.pushHistory()}},!1)},n.prototype.indent=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("indent",!1,null),e.pushHistory()},!1)},n.prototype.outdent=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("outdent",!1,null),e.pushHistory()},!1)},n.prototype.insertHorizontalRule=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("insertHorizontalRule",!1,null),e.pushHistory()},!1)},n.prototype.insertOrderedList=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("insertOrderedList",!1,null),e.pushHistory()},!1)},n.prototype.insertUnorderedList=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("insertUnorderedList",!1,null),e.pushHistory()},!1)},n.prototype.insertParagraph=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("insertParagraph",!1,null),e.pushHistory()},!1)},n.prototype.insertCheckbox=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){var n=e.surround("label"),o=document.createElement("input");o.setAttribute("type","checkbox"),n.insertBefore(o,n.firstChild),e.pushHistory()},!1)},n.prototype.insertBlockquote=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.surround("blockquote"),e.pushHistory()},!1)},n.prototype.insertHTML=function(t){this.contentDocument.execCommand("insertHTML",!1,String(t)),this.pushHistory()},n.prototype.insertImage=function(t){this.contentDocument.execCommand("insertImage",!1,String(t)),this.pushHistory()},n.prototype.createLink=function(t,n,e){var o=this;t instanceof EventTarget&&e instanceof HTMLInputElement&&t.addEventListener(String(n),function(t){var n=o.surround("a");null!==n&&(n.setAttribute("href",e.value),n.setAttribute("target","_blank")),o.pushHistory()},!1)},n.prototype.unlink=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("unlink",!1,null),e.pushHistory()},!1)},n.prototype.justifyCenter=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("justifyCenter",!1,null),e.pushHistory()},!1)},n.prototype.justifyFull=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("justifyFull",!1,null),e.pushHistory()},!1)},n.prototype.justifyLeft=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("justifyLeft",!1,null),e.pushHistory()},!1)},n.prototype.justifyRight=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("justifyRight",!1,null),e.pushHistory()},!1)},n.prototype.removeFormat=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("removeFormat",!1,null),e.pushHistory()},!1)},n.prototype.copy=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("copy",!1,null),e.pushHistory()},!1)},n.prototype.cut=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("cut",!1,null),e.pushHistory()},!1)},n.prototype.paste=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("paste",!1,null),e.pushHistory()},!1)},n.prototype.selectAll=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("selectAll",!1,null)},!1)},n.prototype["delete"]=function(t,n){var e=this;t instanceof EventTarget&&t.addEventListener(String(n),function(t){e.contentDocument.execCommand("delete",!1,null),e.pushHistory()},!1)},n.prototype.toHTML=function(){this.editMode===n.EDIT_MODES.TEXT&&(this.contentDocument.body.innerHTML=this.contentDocument.body.textContent,this.editMode=n.EDIT_MODES.HTML)},n.prototype.toText=function(){this.editMode===n.EDIT_MODES.HTML&&(this.contentDocument.body.textContent=this.contentDocument.body.innerHTML,this.editMode=n.EDIT_MODES.TEXT)},n.prototype["export"]=function(){return'<div style="background-color: '+this.currentBackgroundColor+';">'+this.contentDocument.body.innerHTML+"</div>"},t.BeautifulEditor=n}(window);
//# sourceMappingURL=BeautifulEditor.min.js.map